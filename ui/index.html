<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./src/assets/favico.png" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ez Plugg</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=DynaPuff:wght@400..700&family=Ephesis&family=Lexend+Giga:wght@100..900&family=Londrina+Shadow&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap");
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx">
(function() {
  const sessionId = localStorage.getItem("crm_session_id") || crypto.randomUUID();
  localStorage.setItem("crm_session_id", sessionId);

  function sendEvent(eventType, extra = {}) {
    fetch("http://localhost:3000/api/track", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        customerId: "123", // Du kan sätta detta dynamiskt per kund
        sessionId: sessionId,
        eventType: eventType,
        url: window.location.href,
        userAgent: navigator.userAgent,
        ...extra
      })
    }).catch(err => console.error("Tracking error:", err));
  }

  // Sidvisning
  sendEvent("page_view");

  // Klickexempel (på alla länkar)
  document.addEventListener("click", e => {
    if (e.target.tagName === "A") {
      sendEvent("click", { link: e.target.href });
    }
  });
})();

</script>
  </body>
</html>
